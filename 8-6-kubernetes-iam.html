<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Kubernetes IAM - Ultimate IAM Security Guide</title>
  <link rel="stylesheet" href="main.css">
</head>
<body>
  <div class="page-wrapper">
    <!-- Mobile Menu Toggle -->
    <button class="mobile-menu-toggle" aria-label="Toggle navigation">
      <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
        <line x1="3" y1="6" x2="21" y2="6"></line>
        <line x1="3" y1="12" x2="21" y2="12"></line>
        <line x1="3" y1="18" x2="21" y2="18"></line>
      </svg>
    </button>
    <nav class="sidebar">
      <div class="sidebar-header">
        <a href="index.html" class="sidebar-logo">
          <div class="sidebar-logo-icon">ğŸ”</div>
          <div class="sidebar-logo-text">IAM <span>Guide</span></div>
        </a>
      </div>
      <!-- Navigation generated by JavaScript -->
    </nav>
    <main class="main-content">
      <div class="content-wrapper">
        <article class="content-main">
          <div class="badge badge-l2">L2 Technical</div>
          <h1>Kubernetes IAM</h1>
          
          <div class="overview-box">
            <h3>ğŸ¯ What This Page Covers</h3>
            <p>Kubernetes uses RBAC for authorization, service accounts for workloads, and can integrate with external IdPs via OIDC. This covers K8s authentication, RBAC, and workload identity.</p>
          </div>

          <h2 id="authn-methods">Authentication Methods</h2>
          <div class="table-wrapper"><table>
            <thead><tr><th>Method</th><th>Use Case</th><th>Security</th></tr></thead>
            <tbody>
              <tr><td><strong>X.509 Certificates</strong></td><td>Admin access, service accounts</td><td>Strong, but hard to revoke</td></tr>
              <tr><td><strong>OIDC</strong></td><td>User access with IdP (Okta, Entra)</td><td>âœ… Recommended for users</td></tr>
              <tr><td><strong>Service Account Tokens</strong></td><td>Pod-to-API access</td><td>Good with short-lived tokens</td></tr>
              <tr><td><strong>Webhook Token Auth</strong></td><td>Custom authentication</td><td>Depends on implementation</td></tr>
              <tr><td><strong>kubectl proxy</strong></td><td>Development/debugging</td><td>âš ï¸ Dev only</td></tr>
            </tbody>
          </table></div>

          <h2 id="rbac">Kubernetes RBAC</h2>
          <div class="flow-diagram"><pre>
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    KUBERNETES RBAC MODEL                                                 â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                                          â”‚
â”‚   SUBJECTS                    ROLE BINDING              ROLE                            â”‚
â”‚   (WHO)                       (CONNECTS)                (WHAT)                          â”‚
â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”            â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”           â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                 â”‚
â”‚   â”‚ â€¢ User      â”‚            â”‚             â”‚           â”‚ Rules:      â”‚                 â”‚
â”‚   â”‚ â€¢ Group     â”‚â—„â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–ºâ”‚ RoleBinding â”‚â—„â”€â”€â”€â”€â”€â”€â”€â”€â”€â–ºâ”‚ â€¢ apiGroups â”‚                 â”‚
â”‚   â”‚ â€¢ ServiceAccâ”‚            â”‚ (namespace) â”‚           â”‚ â€¢ resources â”‚                 â”‚
â”‚   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜            â”‚     OR      â”‚           â”‚ â€¢ verbs     â”‚                 â”‚
â”‚                              â”‚ ClusterRole â”‚           â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                 â”‚
â”‚                              â”‚ Binding     â”‚                                            â”‚
â”‚                              â”‚ (cluster)   â”‚           â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                 â”‚
â”‚                              â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜           â”‚ ClusterRole â”‚                 â”‚
â”‚                                                        â”‚ (cluster-   â”‚                 â”‚
â”‚                                                        â”‚  wide)      â”‚                 â”‚
â”‚                                                        â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                 â”‚
â”‚                                                                                          â”‚
â”‚   Role = namespaced permissions    |    ClusterRole = cluster-wide permissions         â”‚
â”‚                                                                                          â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜</pre></div>

          <h2 id="rbac-examples">RBAC Examples</h2>
          <div class="code-block"><div class="code-header"><span class="code-language">Role and RoleBinding</span></div><pre><code># ROLE: Define what permissions (namespaced)
apiVersion: rbac.authorization.k8s.io/v1
kind: Role
metadata:
  namespace: production
  name: pod-reader
rules:
- apiGroups: [""]
  resources: ["pods", "pods/log"]
  verbs: ["get", "list", "watch"]

---
# ROLEBINDING: Assign role to subjects
apiVersion: rbac.authorization.k8s.io/v1
kind: RoleBinding
metadata:
  name: read-pods
  namespace: production
subjects:
- kind: User
  name: <a href="/cdn-cgi/l/email-protection" class="__cf_email__" data-cfemail="5d373c33381d3e32302d3c3324733e3230">[email&#160;protected]</a>    # From OIDC
  apiGroup: rbac.authorization.k8s.io
- kind: Group
  name: developers          # From OIDC groups claim
  apiGroup: rbac.authorization.k8s.io
roleRef:
  kind: Role
  name: pod-reader
  apiGroup: rbac.authorization.k8s.io

---
# CLUSTERROLE: Cluster-wide permissions
apiVersion: rbac.authorization.k8s.io/v1
kind: ClusterRole
metadata:
  name: namespace-admin
rules:
- apiGroups: [""]
  resources: ["namespaces"]
  verbs: ["get", "list", "create", "delete"]</code></pre></div>

          <h2 id="service-accounts">Service Accounts</h2>
          <div class="code-block"><div class="code-header"><span class="code-language">Pod Service Account</span></div><pre><code># Create service account
apiVersion: v1
kind: ServiceAccount
metadata:
  name: my-app
  namespace: production

---
# Pod using service account
apiVersion: v1
kind: Pod
metadata:
  name: my-app-pod
spec:
  serviceAccountName: my-app   # Uses this SA for K8s API access
  automountServiceAccountToken: true  # Token mounted to pod
  containers:
  - name: app
    image: my-app:latest

---
# Grant permissions to service account
apiVersion: rbac.authorization.k8s.io/v1
kind: RoleBinding
metadata:
  name: my-app-secrets
  namespace: production
subjects:
- kind: ServiceAccount
  name: my-app
  namespace: production
roleRef:
  kind: Role
  name: secret-reader
  apiGroup: rbac.authorization.k8s.io</code></pre></div>

          <h2 id="workload-identity">Workload Identity (Cloud)</h2>
          <p>Connect K8s Service Accounts to cloud IAM for secure cloud resource access.</p>
          <div class="table-wrapper"><table>
            <thead><tr><th>Cloud</th><th>Feature</th><th>How It Works</th></tr></thead>
            <tbody>
              <tr><td><strong>AWS</strong></td><td>IRSA (IAM Roles for Service Accounts)</td><td>K8s SA â†’ AWS IAM Role via OIDC</td></tr>
              <tr><td><strong>Azure</strong></td><td>Workload Identity</td><td>K8s SA â†’ Azure Managed Identity via federation</td></tr>
              <tr><td><strong>GCP</strong></td><td>Workload Identity</td><td>K8s SA â†’ GCP Service Account</td></tr>
            </tbody>
          </table></div>

          <h2 id="day-to-day">ğŸ”§ Security Engineer Day-to-Day Tasks</h2>
          <div class="callout tip"><div class="callout-content"><div class="callout-title">ğŸ‘¨â€ğŸ’» What You Actually Do</div>
            
            <p><strong>Access Management:</strong></p>
            <ul>
              <li>Create RoleBindings for new developers/teams</li>
              <li>Audit RBAC permissions across namespaces</li>
              <li>Review and remove stale access</li>
              <li>Configure OIDC integration with corporate IdP</li>
            </ul>

            <p><strong>Security Reviews:</strong></p>
            <ul>
              <li>Audit pods running as root or with host access</li>
              <li>Check for overprivileged service accounts</li>
              <li>Review secrets management practices</li>
              <li>Verify network policies are in place</li>
            </ul>

            <p><strong>Incident Response:</strong></p>
            <ul>
              <li>Investigate unauthorized API access</li>
              <li>Revoke compromised service account tokens</li>
              <li>Audit kubectl access logs</li>
            </ul>
          </div></div>

          <h2 id="interview-tips">Interview Tips</h2>
          <div class="callout interview"><div class="callout-content"><div class="callout-title">ğŸ’¡ Key Interview Points</div>
            <ul>
              <li><strong>RBAC:</strong> Role + RoleBinding = namespaced, ClusterRole + ClusterRoleBinding = cluster-wide</li>
              <li><strong>Service Accounts:</strong> For pods to access K8s API</li>
              <li><strong>OIDC:</strong> Integrate with corporate IdP for user authentication</li>
              <li><strong>Workload Identity:</strong> K8s SA â†’ Cloud IAM without secrets</li>
              <li><strong>Least privilege:</strong> Don't give cluster-admin to everyone</li>
            </ul>
          </div></div>

          <nav class="page-nav">
            <a href="8-5-multi-cloud-identity.html" class="page-nav-link prev"><span class="page-nav-label">â† Previous</span><span class="page-nav-title">Multi-Cloud Identity</span></a>
            <a href="8-7-infrastructure-as-code.html" class="page-nav-link next"><span class="page-nav-label">Next â†’</span><span class="page-nav-title">Infrastructure as Code</span></a>
           </nav>
        </article>
      </div>
    </main>
  </div>
  <script src="main.js"></script>
</body>
</html>

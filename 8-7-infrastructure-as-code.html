<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Infrastructure as Code - Ultimate IAM Security Guide</title>
  <link rel="stylesheet" href="main.css">
</head>
<body>
  <div class="page-wrapper">
    <!-- Mobile Menu Toggle -->
    <button class="mobile-menu-toggle" aria-label="Toggle navigation">
      <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
        <line x1="3" y1="6" x2="21" y2="6"></line>
        <line x1="3" y1="12" x2="21" y2="12"></line>
        <line x1="3" y1="18" x2="21" y2="18"></line>
      </svg>
    </button>
    <nav class="sidebar">
      <div class="sidebar-header">
        <a href="index.html" class="sidebar-logo">
          <div class="sidebar-logo-icon">üîê</div>
          <div class="sidebar-logo-text">IAM <span>Guide</span></div>
        </a>
      </div>
      <!-- Navigation generated by JavaScript -->
    </nav>
    <main class="main-content">
      <div class="content-wrapper">
        <article class="content-main">
          <div class="badge badge-l2">L2 Technical</div>
          <h1>Infrastructure as Code</h1>
          
          <div class="overview-box">
            <h3>üéØ What This Page Covers</h3>
            <p>Managing IAM configuration as code using Terraform, ARM templates, CloudFormation. Enables version control, review, and consistent deployments.</p>
          </div>

          <h2 id="iac-benefits">Why IaC for IAM?</h2>
          <div class="table-wrapper"><table>
            <thead><tr><th>Benefit</th><th>Description</th></tr></thead>
            <tbody>
              <tr><td><strong>Version Control</strong></td><td>Track changes, audit history, rollback</td></tr>
              <tr><td><strong>Code Review</strong></td><td>Peer review IAM changes before apply</td></tr>
              <tr><td><strong>Consistency</strong></td><td>Same config across dev/staging/prod</td></tr>
              <tr><td><strong>Automation</strong></td><td>CI/CD for IAM deployments</td></tr>
              <tr><td><strong>Documentation</strong></td><td>Code IS the documentation</td></tr>
              <tr><td><strong>Disaster Recovery</strong></td><td>Rebuild from code</td></tr>
            </tbody>
          </table></div>

          <h2 id="terraform">Terraform Examples</h2>
          <div class="code-block"><div class="code-header"><span class="code-language">Terraform - AWS IAM</span></div><pre><code># AWS IAM Role with Terraform
resource "aws_iam_role" "lambda_role" {
  name = "lambda-execution-role"

  assume_role_policy = jsonencode({
    Version = "2012-10-17"
    Statement = [{
      Action = "sts:AssumeRole"
      Effect = "Allow"
      Principal = {
        Service = "lambda.amazonaws.com"
      }
    }]
  })
}

resource "aws_iam_role_policy_attachment" "lambda_logs" {
  role       = aws_iam_role.lambda_role.name
  policy_arn = "arn:aws:iam::aws:policy/service-role/AWSLambdaBasicExecutionRole"
}

# Custom Policy
resource "aws_iam_policy" "s3_read" {
  name        = "s3-read-policy"
  description = "Read access to specific S3 bucket"

  policy = jsonencode({
    Version = "2012-10-17"
    Statement = [{
      Effect   = "Allow"
      Action   = ["s3:GetObject", "s3:ListBucket"]
      Resource = [
        "arn:aws:s3:::my-bucket",
        "arn:aws:s3:::my-bucket/*"
      ]
    }]
  })
}</code></pre></div>

          <div class="code-block"><div class="code-header"><span class="code-language">Terraform - Azure RBAC</span></div><pre><code># Azure Role Assignment with Terraform
resource "azurerm_role_assignment" "contributor" {
  scope                = azurerm_resource_group.example.id
  role_definition_name = "Contributor"
  principal_id         = azuread_group.developers.object_id
}

# Entra ID Group
resource "azuread_group" "developers" {
  display_name     = "Developers"
  security_enabled = true
}

# Conditional Access Policy
resource "azuread_conditional_access_policy" "require_mfa" {
  display_name = "Require MFA for All Users"
  state        = "enabled"

  conditions {
    users {
      included_users = ["All"]
      excluded_users = ["<a href="/cdn-cgi/l/email-protection" class="__cf_email__" data-cfemail="87e5f5e2e6ece0ebe6f4f4c7f3e2e9e6e9f3a9e8e9eaeee4f5e8f4e8e1f3a9e4e8ea">[email&#160;protected]</a>"]
    }
    applications {
      included_applications = ["All"]
    }
  }

  grant_controls {
    operator          = "OR"
    built_in_controls = ["mfa"]
  }
}</code></pre></div>

          <h2 id="day-to-day">üîß Security Engineer Day-to-Day Tasks</h2>
          <div class="callout tip"><div class="callout-content"><div class="callout-title">üë®‚Äçüíª What You Actually Do</div>
            
            <p><strong>IaC Workflow:</strong></p>
            <ul>
              <li>Write Terraform/ARM for IAM changes</li>
              <li>Submit PR for peer review</li>
              <li>Run terraform plan to preview changes</li>
              <li>Apply through CI/CD pipeline</li>
              <li>Verify changes in console</li>
            </ul>

            <p><strong>Drift Detection:</strong></p>
            <ul>
              <li>Run terraform plan regularly to detect drift</li>
              <li>Investigate manual changes made outside IaC</li>
              <li>Import existing resources into Terraform state</li>
            </ul>
          </div></div>

          <h2 id="interview-tips">Interview Tips</h2>
          <div class="callout interview"><div class="callout-content"><div class="callout-title">üí° Key Interview Points</div>
            <ul>
              <li><strong>IaC benefits:</strong> Version control, review, consistency, automation</li>
              <li><strong>Terraform:</strong> Multi-cloud, declarative, state management</li>
              <li><strong>GitOps:</strong> Git as source of truth, PR-based changes</li>
              <li><strong>Drift:</strong> Detect manual changes, reconcile with code</li>
              <li><strong>Sensitive data:</strong> Don't store secrets in code (use vault)</li>
            </ul>
          </div></div>

          <nav class="page-nav">
            <a href="8-6-kubernetes-iam.html" class="page-nav-link prev"><span class="page-nav-label">‚Üê Previous</span><span class="page-nav-title">Kubernetes IAM</span></a>
            <a href="8-8-cloud-pam.html" class="page-nav-link next"><span class="page-nav-label">Next ‚Üí</span><span class="page-nav-title">Cloud          </nav>
        </article>
      </div>
    </main>
  </div>
  <script src="main.js"></script>
</body>
</html>

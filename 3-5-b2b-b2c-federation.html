<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>B2B & B2C Federation - Ultimate IAM Security Guide</title>
  <link rel="stylesheet" href="main.css">
</head>
<body>
  <div class="page-wrapper">
    <!-- Mobile Menu Toggle -->
    <button class="mobile-menu-toggle" aria-label="Toggle navigation">
      <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
        <line x1="3" y1="6" x2="21" y2="6"></line>
        <line x1="3" y1="12" x2="21" y2="12"></line>
        <line x1="3" y1="18" x2="21" y2="18"></line>
      </svg>
    </button>
    <nav class="sidebar">
      <div class="sidebar-header">
        <a href="index.html" class="sidebar-logo">
          <div class="sidebar-logo-icon">ğŸ”</div>
          <div class="sidebar-logo-text">IAM <span>Guide</span></div>
        </a>
      </div>
      <!-- Navigation generated by JavaScript -->
    </nav>
    <main class="main-content">
      <div class="content-wrapper">
        <article class="content-main">
          <div class="badge badge-l2">L2 Technical</div>
          <h1>B2B & B2C Federation</h1>
          
          <div class="overview-box">
            <h3>ğŸ¯ What This Page Covers</h3>
            <p>B2B (Business-to-Business) federation enables partner access. B2C (Business-to-Consumer) / CIAM handles customer identity with social login. This covers guest access, partner federation, and customer identity patterns.</p>
          </div>

          <h2 id="b2b-vs-b2c">B2B vs B2C</h2>
          <div class="flow-diagram"><pre>
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    B2B vs B2C IDENTITY                                                   â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                                          â”‚
â”‚   B2B (Partner/Guest)                      B2C (Customer/CIAM)                          â”‚
â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”         â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”              â”‚
â”‚   â”‚ WHO: Partners, vendors,     â”‚         â”‚ WHO: Customers, public      â”‚              â”‚
â”‚   â”‚      contractors            â”‚         â”‚      users                  â”‚              â”‚
â”‚   â”‚                             â”‚         â”‚                             â”‚              â”‚
â”‚   â”‚ SCALE: 100s-1000s          â”‚         â”‚ SCALE: 100000s-millions     â”‚              â”‚
â”‚   â”‚                             â”‚         â”‚                             â”‚              â”‚
â”‚   â”‚ AUTH: Their corporate IdP   â”‚         â”‚ AUTH: Social login,         â”‚              â”‚
â”‚   â”‚       (federated)           â”‚         â”‚       email/password        â”‚              â”‚
â”‚   â”‚                             â”‚         â”‚                             â”‚              â”‚
â”‚   â”‚ ACCESS: Internal apps,      â”‚         â”‚ ACCESS: Customer-facing     â”‚              â”‚
â”‚   â”‚         collaboration       â”‚         â”‚         apps only           â”‚              â”‚
â”‚   â”‚                             â”‚         â”‚                             â”‚              â”‚
â”‚   â”‚ EXAMPLE: Vendor accesses    â”‚         â”‚ EXAMPLE: Customer logs      â”‚              â”‚
â”‚   â”‚ your SharePoint with their  â”‚         â”‚ into your app with Google   â”‚              â”‚
â”‚   â”‚ Okta credentials            â”‚         â”‚ account                     â”‚              â”‚
â”‚   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜         â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜              â”‚
â”‚                                                                                          â”‚
â”‚   Products: Entra External ID (B2B)       Products: Entra External ID (B2C),           â”‚
â”‚             Okta B2B                                Auth0, Okta CIAM                    â”‚
â”‚                                                                                          â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜</pre></div>

          <h2 id="entra-b2b">Entra ID B2B (Guest Access)</h2>
          <div class="code-block"><div class="code-header"><span class="code-language">B2B Guest User Flow</span></div><pre><code># INVITE GUEST USER
1. Admin invites partner: vendor@partner.com
2. Guest receives email invitation
3. Guest clicks link, authenticates with their IdP (partner.com)
4. Guest account created in your tenant (as Guest type)
5. Guest can now access resources you've shared

# GUEST USER PROPERTIES
UserType: Guest (not Member)
Source: External Azure AD / Microsoft Account / Email OTP
UPN: vendor_partner.com#EXT#@yourtenant.onmicrosoft.com

# POWERSHELL - INVITE GUEST
New-MgInvitation -InvitedUserEmailAddress "vendor@partner.com" `
  -InviteRedirectUrl "https://myapps.microsoft.com" `
  -SendInvitationMessage $true

# CROSS-TENANT ACCESS SETTINGS (Control federation)
Entra ID â†’ External Identities â†’ Cross-tenant access settings
â”œâ”€â”€ Inbound: Which external orgs can access YOUR resources
â”œâ”€â”€ Outbound: Which external orgs YOUR users can access
â””â”€â”€ Trust settings: Trust MFA from partner? Trust compliant devices?</code></pre></div>

          <h2 id="b2b-security">B2B Security Controls</h2>
          <div class="table-wrapper"><table>
            <thead><tr><th>Control</th><th>Configuration</th><th>Purpose</th></tr></thead>
            <tbody>
              <tr><td><strong>Guest Access Restrictions</strong></td><td>Limit guest permissions</td><td>Guests can't enumerate directory</td></tr>
              <tr><td><strong>MFA for Guests</strong></td><td>Conditional Access requiring MFA</td><td>Even if partner doesn't require MFA</td></tr>
              <tr><td><strong>Access Reviews</strong></td><td>Quarterly guest certification</td><td>Remove stale guest accounts</td></tr>
              <tr><td><strong>Allowed Domains</strong></td><td>Whitelist partner domains</td><td>Only approved partners can be invited</td></tr>
              <tr><td><strong>Sponsor Required</strong></td><td>Internal user must sponsor guest</td><td>Accountability for guest access</td></tr>
            </tbody>
          </table></div>

          <h2 id="social-login">B2C / Social Login</h2>
          <div class="code-block"><div class="code-header"><span class="code-language">Social Identity Providers</span></div><pre><code># COMMON SOCIAL IDENTITY PROVIDERS
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Provider        â”‚ Protocol â”‚ Use Case                   â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ Google          â”‚ OIDC     â”‚ Consumer apps, widespread â”‚
â”‚ Apple           â”‚ OIDC     â”‚ iOS apps, privacy-focused â”‚
â”‚ Facebook        â”‚ OIDC     â”‚ Social/consumer apps      â”‚
â”‚ Microsoft       â”‚ OIDC     â”‚ Enterprise + consumer     â”‚
â”‚ LinkedIn        â”‚ OIDC     â”‚ Professional networking   â”‚
â”‚ GitHub          â”‚ OAuth    â”‚ Developer tools           â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

# IMPLEMENTATION (Auth0 Example)
1. Register your app with social provider (get client_id/secret)
2. Configure connection in Auth0
3. User clicks "Login with Google"
4. Redirect to Google â†’ User consents â†’ Redirect back with token
5. Auth0 creates/updates user profile with Google data
6. Your app receives Auth0 token (abstracted from Google)</code></pre></div>

          <h2 id="day-to-day">ğŸ”§ Security Engineer Day-to-Day Tasks</h2>
          <div class="callout tip"><div class="callout-content"><div class="callout-title">ğŸ‘¨â€ğŸ’» What You Actually Do</div>
            
            <p><strong>B2B Guest Management:</strong></p>
            <ul>
              <li>Process guest invitation requests</li>
              <li>Configure cross-tenant access for new partners</li>
              <li>Run quarterly guest access reviews</li>
              <li>Troubleshoot partner SSO issues</li>
              <li>Remove guests when partnerships end</li>
            </ul>

            <p><strong>B2C/CIAM Operations:</strong></p>
            <ul>
              <li>Monitor social provider connection health</li>
              <li>Handle customer login issues</li>
              <li>Configure progressive profiling</li>
              <li>Implement account linking (social + email)</li>
            </ul>

            <p><strong>Common Issues:</strong></p>
            <ul>
              <li><strong>"Guest can't access SharePoint"</strong> â†’ Check sharing settings, guest permissions</li>
              <li><strong>"Partner MFA not trusted"</strong> â†’ Configure cross-tenant trust settings</li>
              <li><strong>"Social login failed"</strong> â†’ Check provider status, API credentials</li>
            </ul>
          </div></div>

          <h2 id="interview-tips">Interview Tips</h2>
          <div class="callout interview"><div class="callout-content"><div class="callout-title">ğŸ’¡ Key Interview Points</div>
            <ul>
              <li><strong>B2B:</strong> Partner access using their corporate credentials (federated)</li>
              <li><strong>B2C/CIAM:</strong> Customer identity with social login, scale-focused</li>
              <li><strong>Guest vs Member:</strong> Guests have limited permissions by default</li>
              <li><strong>Cross-tenant access:</strong> Control inbound/outbound federation trust</li>
              <li><strong>Products:</strong> Entra External ID, Auth0, Okta CIAM</li>
            </ul>
          </div></div>

          <nav class="page-nav">
            <a href="3-4-ws-federation-legacy.html" class="page-nav-link prev"><span class="page-nav-label">â† Previous</span><span class="page-nav-title">WS-Federation</span></a>
            <a href="3-6-federation-troubleshooting.html" class="page-nav-link next"><span class="page-nav-label">Next â†’</span><span class="page-nav-title">Federation Troubleshooting</span></a>
          </nav>
        </article>
      </div>
    </main>
  </div>
  <script src="main.js"></script>
</body>
</html>

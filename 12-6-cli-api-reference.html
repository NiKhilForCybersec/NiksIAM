<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>CLI & API Reference - Ultimate IAM Security Guide</title>
  <link rel="stylesheet" href="main.css">
</head>
<body>
  <div class="page-wrapper">
    <!-- Mobile Menu Toggle -->
    <button class="mobile-menu-toggle" aria-label="Toggle navigation">
      <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
        <line x1="3" y1="6" x2="21" y2="6"></line>
        <line x1="3" y1="12" x2="21" y2="12"></line>
        <line x1="3" y1="18" x2="21" y2="18"></line>
      </svg>
    </button>
    <nav class="sidebar">
      <div class="sidebar-header">
        <a href="index.html" class="sidebar-logo">
          <div class="sidebar-logo-icon">üîê</div>
          <div class="sidebar-logo-text">IAM <span>Guide</span></div>
        </a>
      </div>
    </nav>
    <main class="main-content">
      <div class="content-wrapper">
        <article class="content-main">
          <div class="badge badge-l2">L2 Technical</div>
          <h1>CLI & API Quick Reference</h1>
          
          <div class="overview-box">
            <h3>üéØ Quick Reference</h3>
            <p>Common CLI commands and API calls for IAM administration across platforms.</p>
          </div>

          <h2 id="powershell">Microsoft Graph PowerShell</h2>
          <div class="code-block">
            <div class="code-header"><span class="code-language">PowerShell</span></div>
            <pre><code># Connect
Connect-MgGraph -Scopes "User.ReadWrite.All","Group.ReadWrite.All"

# Users
Get-MgUser -UserId "user@domain.com"
Get-MgUser -Filter "department eq 'Finance'"
New-MgUser -DisplayName "John" -UserPrincipalName "john@domain.com" -MailNickname "john" -AccountEnabled -PasswordProfile @{Password="P@ss"}

# Groups
Get-MgGroup -Filter "displayName eq 'Finance-Team'"
New-MgGroupMember -GroupId $groupId -DirectoryObjectId $userId
Get-MgGroupMember -GroupId $groupId

# Sign-in Logs
Get-MgAuditLogSignIn -Filter "userId eq 'user-id'" -Top 10</code></pre>
          </div>

          <h2 id="azure-cli">Azure CLI (az)</h2>
          <div class="code-block">
            <div class="code-header"><span class="code-language">Bash</span></div>
            <pre><code># Login
az login

# RBAC
az role assignment list --assignee "user@domain.com"
az role assignment create --assignee "user@domain.com" --role "Contributor" --resource-group "my-rg"
az role definition list --query "[].roleName"

# Entra ID
az ad user list --filter "department eq 'Finance'"
az ad user create --display-name "John" --user-principal-name "john@domain.com" --password "P@ss"
az ad group member add --group "Finance-Team" --member-id "user-object-id"</code></pre>
          </div>

          <h2 id="aws-cli">AWS CLI</h2>
          <div class="code-block">
            <div class="code-header"><span class="code-language">Bash</span></div>
            <pre><code># IAM Users
aws iam list-users
aws iam get-user --user-name john
aws iam create-user --user-name john
aws iam delete-user --user-name john

# IAM Roles
aws iam list-roles
aws iam get-role --role-name MyRole
aws sts assume-role --role-arn "arn:aws:iam::123456789:role/MyRole" --role-session-name "session1"

# Identity Center (SSO)
aws sso-admin list-permission-sets --instance-arn "arn:aws:sso:::instance/..."
aws identitystore list-users --identity-store-id "d-1234567890"

# Who am I?
aws sts get-caller-identity</code></pre>
          </div>

          <h2 id="gcloud">Google Cloud CLI (gcloud)</h2>
          <div class="code-block">
            <div class="code-header"><span class="code-language">Bash</span></div>
            <pre><code># Auth
gcloud auth login
gcloud auth list

# IAM Policy
gcloud projects get-iam-policy PROJECT_ID
gcloud projects add-iam-policy-binding PROJECT_ID --member="user:john@company.com" --role="roles/viewer"

# Service Accounts
gcloud iam service-accounts list
gcloud iam service-accounts create my-sa --display-name="My Service Account"
gcloud iam service-accounts keys create key.json --iam-account=my-sa@project.iam.gserviceaccount.com</code></pre>
          </div>

          <h2 id="okta-api">Okta API</h2>
          <div class="code-block">
            <div class="code-header"><span class="code-language">Bash (curl)</span></div>
            <pre><code># List Users
curl -X GET "https://your-org.okta.com/api/v1/users" \
  -H "Authorization: SSWS ${API_TOKEN}"

# Get User
curl -X GET "https://your-org.okta.com/api/v1/users/john@company.com" \
  -H "Authorization: SSWS ${API_TOKEN}"

# Create User
curl -X POST "https://your-org.okta.com/api/v1/users?activate=true" \
  -H "Authorization: SSWS ${API_TOKEN}" \
  -H "Content-Type: application/json" \
  -d '{"profile":{"firstName":"John","lastName":"Doe","email":"john@company.com","login":"john@company.com"}}'

# Suspend User
curl -X POST "https://your-org.okta.com/api/v1/users/{userId}/lifecycle/suspend" \
  -H "Authorization: SSWS ${API_TOKEN}"</code></pre>
          </div>

          <h2 id="ad-powershell">Active Directory PowerShell</h2>
          <div class="code-block">
            <div class="code-header"><span class="code-language">PowerShell</span></div>
            <pre><code># Users
Get-ADUser -Identity jsmith -Properties *
Get-ADUser -Filter {Department -eq "Finance"}
New-ADUser -Name "John Smith" -SamAccountName "jsmith" -Enabled $true
Set-ADAccountPassword -Identity jsmith -Reset -NewPassword (ConvertTo-SecureString "P@ssword" -AsPlainText -Force)
Unlock-ADAccount -Identity jsmith

# Groups
Get-ADGroupMember -Identity "Finance-Team"
Add-ADGroupMember -Identity "Finance-Team" -Members jsmith
Get-ADPrincipalGroupMembership -Identity jsmith

# Account Status
Search-ADAccount -LockedOut
Search-ADAccount -AccountDisabled
Search-ADAccount -PasswordExpired</code></pre>
          </div>

          <h2 id="vault">HashiCorp Vault CLI</h2>
          <div class="code-block">
            <div class="code-header"><span class="code-language">Bash</span></div>
            <pre><code># Auth
vault login
vault token lookup

# KV Secrets
vault kv put secret/myapp/db username="admin" password="secret"
vault kv get secret/myapp/db
vault kv get -field=password secret/myapp/db

# Dynamic Database Creds
vault read database/creds/my-role

# PKI
vault write pki/issue/my-role common_name="app.example.com" ttl="24h"</code></pre>
          </div>

          <nav class="page-nav">
            <a href="12-5-comparison-tables.html" class="page-nav-link prev">
              <span class="page-nav-label">‚Üê Previous</span>
              <span class="page-nav-title">Comparison Tables</span>
            </a>
            <a href="index.html" class="page-nav-link next">
              <span class="page-nav-label">Back to ‚Üí</span>
              <span class="page-nav-title">Home</span>
            </a>
          </nav>
        </article>
      </div>
    </main>
  </div>
  <script src="main.js"></script>
</body>
</html>

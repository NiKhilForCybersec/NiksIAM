<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Federation Fundamentals - Ultimate IAM Security Guide</title>
  <link rel="stylesheet" href="main.css">
</head>
<body>
  <div class="page-wrapper">
    <button class="mobile-menu-toggle" aria-label="Toggle navigation">
      <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
        <line x1="3" y1="6" x2="21" y2="6"></line>
        <line x1="3" y1="12" x2="21" y2="12"></line>
        <line x1="3" y1="18" x2="21" y2="18"></line>
      </svg>
    </button>
    <nav class="sidebar">
      <div class="sidebar-header">
        <a href="index.html" class="sidebar-logo">
          <div class="sidebar-logo-icon">ğŸ”</div>
          <div class="sidebar-logo-text">IAM <span>Guide</span></div>
        </a>
      </div>
    </nav>
    <main class="main-content">
      <div class="content-wrapper">
        <article class="content-main">
          <div class="badge badge-l2">L2 Technical</div>
          <h1>Federation Fundamentals</h1>
          
          <div class="overview-box">
            <h3>ğŸ¯ What You'll Learn</h3>
            <p>Federation is how you "trust" another organization to authenticate users. It's the magic behind "Sign in with your company account" on third-party apps. This page makes it click.</p>
          </div>

          <!-- THE CORE CONCEPT -->
          <h2 id="analogy">ğŸ¤ The Embassy Analogy</h2>
          <div class="callout tip"><div class="callout-content"><div class="callout-title">Federation = International Passport Recognition</div>
            
            <div class="flow-diagram"><pre>
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    FEDERATION = PASSPORT SYSTEM                                          â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                                          â”‚
â”‚   YOUR COUNTRY                             FOREIGN COUNTRY                              â”‚
â”‚   (Identity Provider)                      (Service Provider)                           â”‚
â”‚                                                                                          â”‚
â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”             â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                  â”‚
â”‚   â”‚ ğŸ›ï¸ Your Government      â”‚             â”‚ ğŸ›ï¸ Their Government    â”‚                  â”‚
â”‚   â”‚ (Okta, Entra ID)        â”‚             â”‚ (Salesforce, Workday)   â”‚                  â”‚
â”‚   â”‚                         â”‚             â”‚                         â”‚                  â”‚
â”‚   â”‚ Issues passports        â”‚             â”‚ Trusts your passports   â”‚                  â”‚
â”‚   â”‚ (authenticates users)   â”‚   TRUST     â”‚ (accepts your users)    â”‚                  â”‚
â”‚   â”‚                         â”‚â—„â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–ºâ”‚                         â”‚                  â”‚
â”‚   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜             â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                  â”‚
â”‚                                                                                          â”‚
â”‚   PASSPORT = SAML Assertion / OIDC Token                                                â”‚
â”‚   (A signed document proving your identity)                                             â”‚
â”‚                                                                                          â”‚
â”‚   THE KEY: Countries don't need to share citizen databases!                             â”‚
â”‚   They just agree to TRUST each other's passports.                                      â”‚
â”‚                                                                                          â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜</pre></div>
            
            <p><strong>In Plain English:</strong> Your company (IdP) issues "passports" (tokens/assertions) that prove who you are. Other apps (SPs) trust your company's passports and let you in - without needing their own username/password for you.</p>
          </div></div>

          <!-- MEMORY TRICKS -->
          <h2 id="memory-tricks">ğŸ§  Memory Tricks</h2>
          <div class="callout warning"><div class="callout-content"><div class="callout-title">ğŸ’¡ Remember These Forever</div>
            
            <p><strong>ğŸ« "Federation = Trusting Someone Else's ID"</strong></p>
            <p>Instead of creating accounts in every app, one system (your IdP) vouches for you everywhere.</p>

            <p style="margin-top:1rem;"><strong>ğŸ†” "IdP = Identity PRODUCER"</strong></p>
            <p>The IdP creates/produces the identity assertion. It says "This is John, he works in Sales."</p>

            <p style="margin-top:1rem;"><strong>ğŸ¯ "SP = Service that ACCEPTS"</strong></p>
            <p>The SP consumes/accepts the assertion. It says "Okta says this is John? Come on in!"</p>

            <p style="margin-top:1rem;"><strong>ğŸ”— "Trust = Pre-Configured Agreement"</strong></p>
            <p>Before federation works, IdP and SP must exchange metadata (certificates, URLs). This is the "treaty" between countries.</p>

            <p style="margin-top:1rem;"><strong>ğŸ“œ The Three Pieces:</strong></p>
            <ul>
              <li><strong>Metadata</strong> = The treaty (exchanged during setup)</li>
              <li><strong>Request</strong> = "Send me to my IdP to prove who I am"</li>
              <li><strong>Response/Assertion</strong> = "Here's proof of who I am, signed by my IdP"</li>
            </ul>
          </div></div>

          <!-- HOW IT WORKS -->
          <h2 id="how-it-works">ğŸ“ How Federation Works (Simple Version)</h2>
          <div class="callout info"><div class="callout-content"><div class="callout-title">ğŸš¶ The Flow in Plain English</div>
            
            <p><strong>SETUP (One-time - "Signing the Treaty"):</strong></p>
            <ol>
              <li>IdP gives SP its certificate and SSO URL ("Here's how to verify my signatures")</li>
              <li>SP gives IdP its ACS URL ("Here's where to send authenticated users")</li>
              <li>Both agree on what user info to share (email, name, department)</li>
            </ol>

            <p style="margin-top:1.5rem;"><strong>RUNTIME (Every login):</strong></p>
            <ol>
              <li><strong>User visits SP:</strong> "I want to access Salesforce"</li>
              <li><strong>SP redirects to IdP:</strong> "Go prove who you are to Okta"</li>
              <li><strong>User authenticates at IdP:</strong> Username, password, MFA</li>
              <li><strong>IdP creates signed assertion:</strong> "This is john@company.com, signed by Okta"</li>
              <li><strong>IdP redirects to SP with assertion:</strong> Browser POSTs to Salesforce</li>
              <li><strong>SP validates signature:</strong> "Yep, this is signed by Okta, I trust Okta"</li>
              <li><strong>SP logs user in:</strong> "Welcome John!"</li>
            </ol>
          </div></div>

          <div class="flow-diagram"><pre>
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    FEDERATION FLOW                                                       â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                                          â”‚
â”‚   USER                    SERVICE PROVIDER              IDENTITY PROVIDER               â”‚
â”‚   (You)                   (Salesforce)                  (Okta)                          â”‚
â”‚     â”‚                          â”‚                              â”‚                         â”‚
â”‚     â”‚ â‘  "I want Salesforce"    â”‚                              â”‚                         â”‚
â”‚     â”‚ â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–º                              â”‚                         â”‚
â”‚     â”‚                          â”‚                              â”‚                         â”‚
â”‚     â”‚ â‘¡ "Go to Okta first"     â”‚                              â”‚                         â”‚
â”‚     â”‚ â—„â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€                              â”‚                         â”‚
â”‚     â”‚                          â”‚                              â”‚                         â”‚
â”‚     â”‚ â‘¢ Redirect to Okta       â”‚                              â”‚                         â”‚
â”‚     â”‚ â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–º                         â”‚
â”‚     â”‚                          â”‚                              â”‚                         â”‚
â”‚     â”‚                          â”‚    â‘£ Login (user/pass/MFA)   â”‚                         â”‚
â”‚     â”‚ â—„â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€                          â”‚
â”‚     â”‚ â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–º                        â”‚
â”‚     â”‚                          â”‚                              â”‚                         â”‚
â”‚     â”‚ â‘¤ "Here's your proof" (signed assertion)               â”‚                         â”‚
â”‚     â”‚ â—„â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€                         â”‚
â”‚     â”‚                          â”‚                              â”‚                         â”‚
â”‚     â”‚ â‘¥ POST assertion to SF   â”‚                              â”‚                         â”‚
â”‚     â”‚ â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–º                              â”‚                         â”‚
â”‚     â”‚                          â”‚                              â”‚                         â”‚
â”‚     â”‚ â‘¦ "Welcome!"             â”‚                              â”‚                         â”‚
â”‚     â”‚ â—„â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€                              â”‚                         â”‚
â”‚                                                                                          â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜</pre></div>

          <!-- PROTOCOLS -->
          <h2 id="protocols">ğŸ“‹ Federation Protocols Compared</h2>
          <div class="table-wrapper"><table>
            <thead><tr><th>Protocol</th><th>Format</th><th>Best For</th><th>Memory Aid</th></tr></thead>
            <tbody>
              <tr><td><strong>SAML 2.0</strong></td><td>XML</td><td>Enterprise web SSO</td><td>The "old reliable" - still dominates enterprise</td></tr>
              <tr><td><strong>OIDC</strong></td><td>JSON (JWT)</td><td>Modern apps, mobile, APIs</td><td>The "new hotness" - simpler, developer-friendly</td></tr>
              <tr><td><strong>WS-Federation</strong></td><td>XML</td><td>Legacy Microsoft apps</td><td>The "legacy" - Microsoft specific, declining</td></tr>
            </tbody>
          </table></div>

          <div class="code-block"><div class="code-header"><span class="code-language">When to Use What</span></div><pre><code># DECISION TREE:

Is it an enterprise SaaS app (Salesforce, Workday, ServiceNow)?
â””â”€â”€ YES â†’ Use SAML 2.0 (they all support it well)

Is it a modern app you're building?
â””â”€â”€ YES â†’ Use OIDC (simpler, better libraries)

Is it a mobile app?
â””â”€â”€ YES â†’ Use OIDC (SAML is painful on mobile)

Is it a legacy Microsoft app (old SharePoint, ADFS)?
â””â”€â”€ YES â†’ May need WS-Federation

SIMPLE RULE:
â€¢ Enterprise SaaS â†’ SAML
â€¢ Custom/Modern apps â†’ OIDC
â€¢ When in doubt â†’ Check what the app supports first</code></pre></div>

          <!-- KEY TERMS -->
          <h2 id="terms">ğŸ“š Key Terms Decoded</h2>
          <div class="table-wrapper"><table>
            <thead><tr><th>Term</th><th>What It Actually Means</th></tr></thead>
            <tbody>
              <tr><td><strong>Trust</strong></td><td>SP has IdP's certificate and will accept tokens signed by it</td></tr>
              <tr><td><strong>Metadata</strong></td><td>XML file with endpoints and certificates for setup</td></tr>
              <tr><td><strong>Assertion/Token</strong></td><td>The signed document proving user identity</td></tr>
              <tr><td><strong>Claims/Attributes</strong></td><td>User info in the assertion (email, name, groups)</td></tr>
              <tr><td><strong>Entity ID</strong></td><td>Unique identifier for IdP or SP (like a domain name)</td></tr>
              <tr><td><strong>SSO URL</strong></td><td>Where to send users to authenticate</td></tr>
              <tr><td><strong>ACS URL</strong></td><td>Where to send the assertion after auth (SP's "mailbox")</td></tr>
            </tbody>
          </table></div>

          <!-- INTERVIEW TIPS -->
          <h2 id="interview-tips">Interview Tips</h2>
          <div class="callout interview"><div class="callout-content"><div class="callout-title">ğŸ’¡ How to Nail Federation Questions</div>
            
            <p><strong>If asked "What is Federation?":</strong></p>
            <p>"Federation is a trust relationship between an Identity Provider and Service Provider. Instead of users having separate credentials for every app, the IdP authenticates users and issues a signed token or assertion. The SP trusts the IdP's signature and grants access based on that token. It's like how countries trust each other's passports - you don't need a new identity for each country you visit."</p>

            <p style="margin-top:1rem;"><strong>If asked "IdP vs SP?":</strong></p>
            <p>"The IdP - Identity Provider - authenticates users and issues tokens. That's Okta, Entra ID, or Ping. The SP - Service Provider - is the application that trusts the IdP and accepts its tokens. That's Salesforce, Workday, or ServiceNow. The IdP produces identity, the SP consumes it."</p>

            <p style="margin-top:1rem;"><strong>If asked "SAML vs OIDC?":</strong></p>
            <p>"SAML uses XML and was designed for web SSO in the enterprise - it's the standard for SaaS apps. OIDC uses JSON and was designed for modern apps, mobile, and APIs - it's simpler for developers. Most enterprise SaaS supports SAML. If you're building something new, OIDC is usually easier to implement."</p>
          </div></div>

          <h2 id="quick-reference">âš¡ Quick Reference Card</h2>
          <div class="code-block"><div class="code-header"><span class="code-language">Federation Cheat Sheet</span></div><pre><code>FEDERATION = Trust between IdP and SP

KEY PLAYERS:
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
IdP = Identity Provider (authenticates users)
    Examples: Okta, Entra ID, Ping, ADFS
    
SP = Service Provider (trusts IdP, grants access)
    Examples: Salesforce, Workday, ServiceNow

THE FLOW:
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
1. User visits SP
2. SP redirects to IdP
3. User authenticates at IdP
4. IdP creates signed assertion
5. User redirected back to SP with assertion
6. SP validates signature, logs user in

PROTOCOLS:
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
SAML 2.0 = XML, enterprise SaaS
OIDC = JSON/JWT, modern apps
WS-Fed = XML, legacy Microsoft

SETUP REQUIRES:
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
â€¢ Exchange metadata (certificates, URLs)
â€¢ Configure attribute mapping
â€¢ Test with pilot users</code></pre></div>

          <nav class="page-nav">
            <a href="2-10-auth-attacks-defense.html" class="page-nav-link prev"><span class="page-nav-label">â† Previous</span><span class="page-nav-title">Auth Attacks & Defense</span></a>
            <a href="3-2-saml-federation.html" class="page-nav-link next"><span class="page-nav-label">Next â†’</span><span class="page-nav-title">SAML Federation</span></a>
          </nav>
        </article>
      </div>
    </main>
  </div>
  <script src="main.js"></script>
</body>
</html>

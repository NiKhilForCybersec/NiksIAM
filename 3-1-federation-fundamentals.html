<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Federation Fundamentals - Ultimate IAM Security Guide</title>
  <link rel="stylesheet" href="main.css">
</head>
<body>
  <div class="page-wrapper">
    <!-- Mobile Menu Toggle -->
    <button class="mobile-menu-toggle" aria-label="Toggle navigation">
      <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
        <line x1="3" y1="6" x2="21" y2="6"></line>
        <line x1="3" y1="12" x2="21" y2="12"></line>
        <line x1="3" y1="18" x2="21" y2="18"></line>
      </svg>
    </button>
    <nav class="sidebar">
      <div class="sidebar-header">
        <a href="index.html" class="sidebar-logo">
          <div class="sidebar-logo-icon">ğŸ”</div>
          <div class="sidebar-logo-text">IAM <span>Guide</span></div>
        </a>
      </div>
    </nav>
    <main class="main-content">
      <div class="content-wrapper">
        <article class="content-main">
          <div class="badge badge-l2">L2 Technical</div>
          <h1>Federation Fundamentals</h1>
          
          <div class="overview-box">
            <h3>ğŸ¯ What This Page Covers</h3>
            <p>Federation enables SSO across organizational boundaries by establishing trust relationships. This covers federation concepts, trust models, and when to use different federation protocols.</p>
          </div>

          <h2 id="what-is-federation">What is Federation?</h2>
          <p>Federation is a trust arrangement where one organization (Identity Provider) authenticates users, and other organizations (Service Providers) accept that authentication without requiring users to create new accounts.</p>

          <div class="flow-diagram">
            <pre>
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    FEDERATION TRUST MODEL                                                â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                                          â”‚
â”‚   COMPANY A                              COMPANY B (SaaS Vendor)                        â”‚
â”‚   (Identity Provider)                    (Service Provider)                             â”‚
â”‚                                                                                          â”‚
â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”               â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                        â”‚
â”‚   â”‚                     â”‚    TRUST      â”‚                     â”‚                        â”‚
â”‚   â”‚   Entra ID / Okta   â”‚â—„â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–ºâ”‚    Salesforce       â”‚                        â”‚
â”‚   â”‚                     â”‚  Relationship â”‚                     â”‚                        â”‚
â”‚   â”‚   â€¢ Authenticates   â”‚               â”‚   â€¢ Trusts IdP      â”‚                        â”‚
â”‚   â”‚     users           â”‚               â”‚   â€¢ No passwords    â”‚                        â”‚
â”‚   â”‚   â€¢ Issues tokens   â”‚               â”‚   â€¢ Accepts tokens  â”‚                        â”‚
â”‚   â”‚                     â”‚               â”‚                     â”‚                        â”‚
â”‚   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜               â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                        â”‚
â”‚              â”‚                                     â”‚                                    â”‚
â”‚              â”‚                                     â”‚                                    â”‚
â”‚              â–¼                                     â–¼                                    â”‚
â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”               â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                        â”‚
â”‚   â”‚  User: Sarah        â”‚â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–ºâ”‚  User can access    â”‚                        â”‚
â”‚   â”‚  Logs in once       â”‚   SSO Token   â”‚  Salesforce without â”‚                        â”‚
â”‚   â”‚  at Company A       â”‚               â”‚  separate login     â”‚                        â”‚
â”‚   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜               â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                        â”‚
â”‚                                                                                          â”‚
â”‚   KEY BENEFIT: User has ONE identity, used everywhere                                   â”‚
â”‚                                                                                          â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
            </pre>
          </div>

          <h2 id="terminology">Federation Terminology</h2>

          <div class="table-wrapper">
            <table>
              <thead><tr><th>Term</th><th>Definition</th><th>Example</th></tr></thead>
              <tbody>
                <tr>
                  <td><strong>Identity Provider (IdP)</strong></td>
                  <td>System that authenticates users and issues assertions</td>
                  <td>Okta, Entra ID, Ping Identity</td>
                </tr>
                <tr>
                  <td><strong>Service Provider (SP)</strong></td>
                  <td>Application that relies on IdP for authentication</td>
                  <td>Salesforce, ServiceNow, AWS</td>
                </tr>
                <tr>
                  <td><strong>Trust</strong></td>
                  <td>Agreement where SP accepts IdP's authentication assertions</td>
                  <td>Salesforce trusts Okta tokens</td>
                </tr>
                <tr>
                  <td><strong>Assertion/Token</strong></td>
                  <td>Signed statement about user identity and attributes</td>
                  <td>SAML Assertion, OIDC ID Token</td>
                </tr>
                <tr>
                  <td><strong>Metadata</strong></td>
                  <td>Configuration describing IdP/SP endpoints and certificates</td>
                  <td>SAML metadata XML</td>
                </tr>
                <tr>
                  <td><strong>Claims/Attributes</strong></td>
                  <td>Information about user included in assertion</td>
                  <td>Email, name, groups, roles</td>
                </tr>
              </tbody>
            </table>
          </div>

          <h2 id="protocols">Federation Protocols</h2>

          <div class="table-wrapper">
            <table>
              <thead><tr><th>Protocol</th><th>Token Format</th><th>Best For</th><th>Status</th></tr></thead>
              <tbody>
                <tr>
                  <td><strong>SAML 2.0</strong></td>
                  <td>XML</td>
                  <td>Enterprise SaaS, legacy</td>
                  <td>Mature, widely used</td>
                </tr>
                <tr>
                  <td><strong>OIDC</strong></td>
                  <td>JWT (JSON)</td>
                  <td>Modern apps, APIs, mobile</td>
                  <td>Growing, recommended</td>
                </tr>
                <tr>
                  <td><strong>WS-Federation</strong></td>
                  <td>XML</td>
                  <td>Microsoft ecosystem (ADFS)</td>
                  <td>Legacy, declining</td>
                </tr>
                <tr>
                  <td><strong>OAuth 2.0</strong></td>
                  <td>Opaque/JWT</td>
                  <td>API authorization (not authN)</td>
                  <td>Standard for APIs</td>
                </tr>
              </tbody>
            </table>
          </div>

          <h2 id="flow">Federation Flow</h2>

          <div class="flow-diagram">
            <pre>
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    SP-INITIATED SSO FLOW                                                 â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                                          â”‚
â”‚   USER                    SP (Salesforce)              IdP (Okta)                       â”‚
â”‚     â”‚                          â”‚                           â”‚                            â”‚
â”‚     â”‚  1. Access app           â”‚                           â”‚                            â”‚
â”‚     â”‚â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–ºâ”‚                           â”‚                            â”‚
â”‚     â”‚                          â”‚                           â”‚                            â”‚
â”‚     â”‚  2. Redirect to IdP      â”‚                           â”‚                            â”‚
â”‚     â”‚â—„â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”‚                           â”‚                            â”‚
â”‚     â”‚                          â”‚                           â”‚                            â”‚
â”‚     â”‚  3. Authenticate at IdP  â”‚                           â”‚                            â”‚
â”‚     â”‚â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–º                            â”‚
â”‚     â”‚                          â”‚   (user enters password,  â”‚                            â”‚
â”‚     â”‚                          â”‚    completes MFA)         â”‚                            â”‚
â”‚     â”‚                          â”‚                           â”‚                            â”‚
â”‚     â”‚  4. IdP issues token/assertion                       â”‚                            â”‚
â”‚     â”‚â—„â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”‚                            â”‚
â”‚     â”‚                          â”‚                           â”‚                            â”‚
â”‚     â”‚  5. Present token to SP  â”‚                           â”‚                            â”‚
â”‚     â”‚â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–ºâ”‚                           â”‚                            â”‚
â”‚     â”‚                          â”‚                           â”‚                            â”‚
â”‚     â”‚                          â”‚  6. SP validates token    â”‚                            â”‚
â”‚     â”‚                          â”‚     (signature, issuer,   â”‚                            â”‚
â”‚     â”‚                          â”‚      audience, expiry)    â”‚                            â”‚
â”‚     â”‚                          â”‚                           â”‚                            â”‚
â”‚     â”‚  7. Access granted       â”‚                           â”‚                            â”‚
â”‚     â”‚â—„â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”‚                           â”‚                            â”‚
â”‚     â”‚                          â”‚                           â”‚                            â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
            </pre>
          </div>

          <h2 id="trust-setup">Setting Up Trust</h2>

          <div class="code-block">
            <div class="code-header"><span class="code-language">Federation Trust Setup</span></div>
            <pre><code># What IdP provides to SP:
- IdP Entity ID (issuer): https://company.okta.com
- SSO URL: https://company.okta.com/app/salesforce/sso
- Signing Certificate: X.509 certificate (public key)
- Or: Metadata URL with all of the above

# What SP provides to IdP:
- SP Entity ID (audience): https://salesforce.com
- ACS URL: https://login.salesforce.com/saml
- Required attributes: email, firstName, lastName
- Or: SP Metadata URL

# Trust is established when:
1. IdP knows where to send users (ACS URL)
2. SP knows how to validate tokens (IdP certificate)
3. Both agree on Entity IDs and attribute mapping</code></pre>
          </div>

          <h2 id="interview-tips">Interview Tips</h2>
          <div class="callout interview">
            <div class="callout-content">
              <div class="callout-title">ğŸ’¡ Key Interview Points</div>
              <ul>
                <li><strong>IdP vs SP:</strong> IdP authenticates and issues tokens, SP trusts and accepts tokens</li>
                <li><strong>Trust:</strong> SP trusts IdP based on certificates/keys for signature validation</li>
                <li><strong>SAML vs OIDC:</strong> SAML = XML, enterprise legacy; OIDC = JSON/JWT, modern</li>
                <li><strong>Metadata:</strong> Contains endpoints and certificates for configuration</li>
                <li><strong>SP-initiated:</strong> User goes to app, redirected to IdP (most common)</li>
                <li><strong>IdP-initiated:</strong> User starts at IdP portal, clicks app (less secure)</li>
              </ul>
            </div>
          </div>

          <nav class="page-nav">
            <a href="2-10-auth-attacks-defense.html" class="page-nav-link prev">
              <span class="page-nav-label">â† Previous</span>
              <span class="page-nav-title">Auth Attacks & Defense</span>
            </a>
            <a href="3-2-saml-federation.html" class="page-nav-link next">
              <span class="page-nav-label">Next â†’</span>
              <span class="page-nav-title">SAML Federation</span>
            </a>
          </nav>
        </article>
      </div>
    </main>
  </div>
  <script src="main.js"></script>
</body>
</html>
